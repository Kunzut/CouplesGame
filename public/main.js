(()=>{"use strict";class t{constructor(t){this.$el=document.createElement("div"),this.$el.classList.add(t)}init(){}append(t=[]){t.forEach((t=>{this.$el.appendChild(t)}))}destroy(){this.$el.remove()}}class e{constructor(t){this.$app=t,this.$el=document.createElement("form"),this.init()}init(){this.$inputWidth=document.createElement("input"),this.$inputHeght=document.createElement("input"),this.$startButton=document.createElement("button"),this.$el.classList.add("form-group"),this.$inputWidth.classList.add("form-control"),this.$inputWidth.placeholder="Введите ширину ",this.$inputHeght.classList.add("form-control"),this.$inputHeght.placeholder="Введите высоту ",this.$startButton.classList.add("btn","start-btn"),this.$startButton.type="submit",this.$startButton.innerText="Начать",this.$el.appendChild(this.$inputWidth),this.$el.appendChild(this.$inputHeght),this.$el.appendChild(this.$startButton)}getWidthAndHeight(){return this.width=this.$inputWidth.value,this.height=this.$inputHeght.value,this.checkWidthAndHeight(this.width,this.height)?(this.value={width:this.width,height:this.height},this.value):(this.$inputWidth.value="4",this.$inputHeght.value="4",!1)}checkWidthAndHeight(t,e){return t>0&&t<=10&&t%2==0&&e>0&&e<=10&&e%2==0}}class i{constructor(t){this.$name=document.createElement("span"),this.$name.classList.add("card-text"),this.$name.innerText=`${t}`,this.init()}init(){this.$el=document.createElement("li"),this.$cardFront=document.createElement("div"),this.$cardBack=document.createElement("div"),this.$el.classList.add("card","is-flipped"),this.$el.dataset.open="false",this.$cardFront.classList.add("card-face","card-face--front"),this.$cardBack.classList.add("card-face","card-face--back"),this.$cardFront.appendChild(this.$name),this.$el.appendChild(this.$cardFront),this.$el.appendChild(this.$cardBack)}selectCard(){if(null!==this.openCard)return!!this.openCard()&&this.$el}openCard(){return this.$el.classList.contains("is-flipped")?(this.$el.classList.remove("is-flipped"),!0):(this.$el.classList.add("is-flipped"),!1)}}class s extends t{constructor(t,e){super(e),this.$app=t,this.init()}init(){this.$title=document.createElement("h2"),this.$buttonRepeat=document.createElement("button"),this.$title.classList.add("end-title"),this.$title.innerText="Конец игры!",this.$buttonRepeat.classList.add("btn","repeat-btn"),this.$buttonRepeat.innerText="Еще раз",this.$buttonRepeat.addEventListener("click",(t=>{t.preventDefault(),this.destroy(),this.repeatGame()})),this.append([this.$title,this.$buttonRepeat]),this.addApp(this.$el)}addApp(t){this.$app.appendChild(t)}repeatGame(){const t=new n(this.$app,"menu-wrap");this.addApp(t.$el)}}class h extends t{constructor(t,e,i,s){super(e),this.$app=t,this.width=i,this.height=s,this.select=[],this.isSelected=!1,this.opened=[],this.timer=60,this.timerEnd=!1,this.init()}init(){this.$title=document.createElement("h2"),this.$timer=document.createElement("span"),this.$cardsList=document.createElement("ul"),this.cards=this.createdArrayNums(this.width,this.height),this.$cards=this.createCards(this.cards),this.$title.classList.add("game-title"),this.$title.innerText="Сouples Game v0.2",this.$timer.classList.add("game-timer"),this.$timer.innerText="Timer: "+this.timer,this.$cardsList.classList.add("card-list"),this.$title.appendChild(this.$timer),this.$cards.forEach((t=>{this.$cardsList.appendChild(t.$el),t.$el.addEventListener("click",(e=>{e.preventDefault(),this.isSelected||this.selectCard(t)}))})),this.timerFunc=setInterval((()=>{0===this.timer?(this.$timer.innerText="Timer: "+this.timer,this.timerEnd=!0,this.endGame(),clearInterval(this.timerFunc)):(this.timer--,this.$timer.innerText="Timer: "+this.timer)}),1e3),this.append([this.$title,this.$cardsList]),this.addApp()}selectCard(t){t.selectCard()&&(this.select.push(t),this.select.length>=2&&(this.isSelected=!0,this.isCompare()),this.endGame())}endGame(){this.isEnd()&&(clearInterval(this.timerFunc),setTimeout((()=>{this.destroy(),this.createEndScene()}),1e3))}createEndScene(){new s(this.$app,"menu-wrap")}isEnd(){return this.opened.length===this.$cards.length||!0===this.timerEnd}isCompare(){this.select[0].$name.innerText===this.select[1].$name.innerText?(this.select[0].openCard=null,this.select[1].openCard=null,this.opened.push(this.select[0],this.select[1]),this.select=[],this.isSelected=!1):setTimeout((()=>{this.select[0].openCard(),this.select[1].openCard(),this.select=[],this.isSelected=!1}),1e3)}addApp(){this.$app.appendChild(this.$el)}createCards(t){const e=[];return t.forEach((t=>{const s=new i(t);e.push(s)})),e}createdArrayNums(t,e){const i=[],s=t*e;let h=1;for(let t=1;t<=s;t+=2)i.push(h),i.push(h),h++;return function(t){let e,i;for(let s=t.length-1;s>0;s--)e=Math.floor(Math.random()*(s+1)),i=t[e],t[e]=t[s],t[s]=i;return t}(i)}}class n extends t{constructor(t,e){super(e),this.$app=t,this.init()}init(){this.$title=document.createElement("h1"),this.$form=new e(this.$app),this.$title.classList.add("menu-title"),this.$title.innerText="Сouples Game v0.2",this.$form.$el.addEventListener("submit",(t=>{t.preventDefault(),this.startGame()})),this.append([this.$title,this.$form.$el]),this.addApp()}addApp(){this.$app.appendChild(this.$el)}startGame(){const t=this.$form.getWidthAndHeight();t&&(this.$el.remove(),this.gameScene=new h(this.$app,"game-wrap",t.width,t.height))}}new class extends t{constructor(t){super(t),this.$el=document.getElementById(t),this.init()}init(){this.menu=new n(this.$el,"menu-wrap")}}("app")})();